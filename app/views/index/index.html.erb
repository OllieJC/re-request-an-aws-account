<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-l">Request an AWS account</h1>
    <% if @email %>
      <p>You are logged in as <em><%= @email %></em>.</p>
      <h2 class="govuk-heading-m">Grant users access to AWS</h2>
      <p>GDS manages a number of AWS accounts. Users for these accounts are managed centrally by reliability engineering with a base GDS account: <em>gds-users</em>.</p>
      <p>For a user to access resources in AWS they should be added to the <em>gds-users</em> base account and permitted to assume a role in the target account.</p>
      <p> See <a href="https://reliability-engineering.cloudapps.digital/iaas.html#access-aws-accounts">accessing AWS accounts</a> in the reliability engineering docs.</p>
      <p>Anyone at GDS can request user access to AWS for one or more people.</p>
      <a href="<%= user_path %>" role="button" draggable="false" class="govuk-button govuk-button--start" data-module="govuk-button">
        Request user access
        <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19" viewBox="0 0 33 40" role="presentation" focusable="false">
          <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z" />
        </svg>
      </a>
      <p>
        You should ensure that users are removed from <em>gds-users</em> as part of your team's leavers process.
        Users should only be removed when they leave GDS or no longer need access to any AWS resources.
      </p>
      <p>
        <a href="<%= remove_user_path %>" class="govuk-button govuk-button--warning" data-module="govuk-button">Request user removal</a>
      </p>
      <p>If you need to reset your AWS password, you can do that here as well.</p>
      <p>
        <a href="<%= reset_password_path %>" class="govuk-button" data-module="govuk-button">Request password reset</a>
      </p>
      <h2 class="govuk-heading-m">Request a new AWS account</h2>
      <p>Teams can use multiple AWS accounts to provide isolation between workloads. For example having separate production and test environments.</p>
      <p>See <a href="https://reliability-engineering.cloudapps.digital/iaas.html#create-aws-accounts">how to create AWS accounts</a> in the reliability engineering docs.</p>
      <a href="<%= account_details_path %>" role="button" draggable="false" class="govuk-button govuk-button--start" data-module="govuk-button">
        Request an account
        <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19" viewBox="0 0 33 40" role="presentation" focusable="false">
          <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z" />
        </svg>
      </a>
    <% else %>
      <p>You can use this service to:</p>
      <ul class="govuk-list govuk-list--bullet">
        <li>Request a new AWS account (e.g. for a new service or environment)</li>
        <li>Grant users access to AWS (e.g. for new joiners)</li>
        <li>Reset your AWS IAM password (for yourself)</li>
        <li>Remove users from AWS (e.g. for leavers)</li>
      </ul>
      <p>First you need to sign in with your GDS Google account so we know who you are.</p>
      <a href="/auth/google_oauth2" role="button" draggable="false" class="govuk-button govuk-button--start" data-module="govuk-button">
        Sign in
        <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19" viewBox="0 0 33 40" role="presentation" focusable="false">
          <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z" />
        </svg>
      </a>
    <% end %>
  </div>
</div>

